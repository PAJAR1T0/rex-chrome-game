(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&l(h)}).observe(document,{childList:!0,subtree:!0});function s(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function l(i){if(i.ep)return;i.ep=!0;const c=s(i);fetch(i.href,c)}})();const f=new Image,P=new Audio,B=new Audio,C=new Audio,Z=async()=>{f.src="../assets/sprite.png",await f.decode()},_=async()=>{P.src="../assets/jump.mp3",B.src="../assets/gameover.mp3",C.src="../assets/level.mp3",await P.load(),await B.load(),await C.load()},tt=async()=>{await Z(),await _()};let n,r,y,T,L;const et=()=>{L=document.getElementById("app"),r=document.createElement("canvas"),y=window.devicePixelRatio,r.style.width=`${a.canvasInitialWidth}px`,r.style.height="150px",r.width=Math.floor(a.canvasInitialWidth*y),r.height=Math.floor(150*y),r.style.backgroundColor="transparent",n=r.getContext("2d"),n.scale(y,y),n.imageSmoothingEnabled=!0,L.appendChild(r),T=r.getBoundingClientRect()};let a={duck:!1,groundx:0,clouds:{x1:800,x2:500},initialVelocity:7,dinoDrawLeg:"RightLeg",canvasInitialWidth:70,canvasMaxWidth:600,jump:!1,dinoY:140,dinoX:20,obstacles:["cactus","bird"],cactusTypes:["cactus","cactusDouble","cactusDoubleB","cactusTriple"]};const X=()=>{if(!b){n.clearRect(0,0,r.width,r.height),F(g.ground),wt(g.cloud),pt(),yt(),xt(),lt();const t=ut(),e=g[t];return U(e),requestAnimationFrame(X)}},$=()=>{E(),mt(),X(),gt(),Y()},at=()=>{At(),requestAnimationFrame(X),dt(),N(),It(),K(),ht(),Y()};let u=a.dinoY,w=13;const ot=90,st=a.dinoY-ot;let I=!1,k=!1;const it=()=>{if(st<u-1){w-=w*.11,u-=w;return}k=!1},nt=()=>{if(u<a.dinoY-6){w+=w*.13,a.dinoY>u?u+=w:u=a.dinoY;return}u=140,w=13,I=!1},lt=()=>{if(I)return k?it():nt()},N=()=>{I||(I=!0,k=!0)};let V=!1,v=!1;const ct=()=>{window.addEventListener("keydown",t=>{if(t.key==="ArrowUp"){if(b&&(E(),$()),!V)return V=!0,at();N(),P.play()}if(t.key==="ArrowDown"){if(v)return;v=!0}}),window.addEventListener("keyup",t=>{t.key==="ArrowDown"&&(v=!1)})},rt=(t,e,s,l)=>{r.addEventListener("click",i=>{let c=i.clientX-T.x,h=i.clientY-T.y;c>t&&c<t+s&&h>e&&h<e+l&&b&&(E(),$())})};let O="RightLeg";const dt=()=>{setInterval(()=>{O=O==="RightLeg"?"LeftLeg":"RightLeg"},1e3/10)},U=({h:t,w:e,x:s,y:l})=>{n.drawImage(f,s,l,e,t,a.dinoX,u-t/2,e/2,t/2)},ut=()=>a.dinoY===u?v?`dinoDuck${O}`:`dino${O}`:"dino";let m=a.initialVelocity,d=0,p=0,S,R=!1,W=!1,A=0;const gt=()=>{m=a.initialVelocity},ft=()=>{R&&(n.font="25px Pixelify Sans",n.fillStyle="gray",n.fillText("NEW RECORD!",227,35),localStorage.setItem("record",p),R=!1),d=0},ht=()=>{p=localStorage.getItem("record")},Y=()=>{setTimeout(()=>{d++,d%100===0&&(j(),C.play()),d%50===0&&m<1.5*a.initialVelocity&&(m+=a.initialVelocity*.125),b||Y()},100)},j=()=>{setTimeout(()=>{if(W=!W,A===5)return A=0;A++,j()},2e3/6)},pt=()=>{W||(S=d.toString().length===1?`000${d}`:d.toString().length===2?`00${d}`:d.toString().length===3?`0${d}`:d.toString(),n.font="25px Pixelify Sans",n.fillStyle="gray",n.fillText(S,540,25))},yt=()=>{d>p*1&&(p=S,R=!0),p=d>p*1?S:p,n.fillText(p,470,25)},g={birdUp:{h:52,w:84,x:708,y:31},birdDown:{h:60,w:84,x:708,y:85},cactus:{h:92,w:46,x:70,y:31},cactusDouble:{h:66,w:64,x:118,y:31},cactusDoubleB:{h:92,w:80,x:184,y:31},cactusTriple:{h:66,w:82,x:266,y:31},dino:{h:86,w:80,x:350,y:31},dinoLeftLeg:{h:86,w:80,x:432,y:31},dinoRightLeg:{h:86,w:80,x:514,y:31},dinoDuckLeftLeg:{h:52,w:110,x:596,y:31},dinoDuckRightLeg:{h:52,w:110,x:596,y:85},ground:{h:28,w:2400,x:0,y:2},cloud:{h:28,w:92,x:794,y:31},replayIcon:{h:60,w:68,x:0,y:31}},wt=({h:t,w:e,x:s,y:l})=>{a.clouds.x1-=m/3,a.clouds.x2-=m/3,n.drawImage(f,s,l,e,t,a.clouds.x1,20,e,t),n.drawImage(f,s,l,e,t,a.clouds.x2,70,e*.7,t*.7),a.clouds.x1<=-100&&(a.clouds.x1=600),a.clouds.x2<=-100&&(a.clouds.x2=600)},F=({h:t,w:e,y:s})=>{a.groundx+=m,n.drawImage(f,a.groundx,s,e,t,0,123,e,t),a.groundx>e-600&&(n.drawImage(f,0,s,e,t,e-a.groundx,123,e,t),a.groundx>=e&&(a.groundx=0))};let x,H,D,q=[{type:"cactus",x:0,y:0,w:0,h:0,initialX:1e3,obstacleActualX:0,drawY:0,obstacleHeight:0,obstacleWidth:0,isDrawingObstacle:!1,isDrawingBird:!1,baseY:0},{type:"cactus",x:0,y:0,w:0,h:0,initialX:700,obstacleActualX:0,drawY:0,obstacleHeight:0,obstacleWidth:0,isDrawingObstacle:!1,isDrawingBird:!1,baseY:0}],o=structuredClone(q);const mt=()=>{o=structuredClone(q),D=null},bt=t=>{if(o[t].isDrawingObstacle===!1){o[t].isDrawingObstacle=!0,Lt(t),D=D?t===0?o[1].obstacleActualX+(350+Math.floor(Math.random()*200)):o[0].obstacleActualX+(350+Math.floor(Math.random()*200)):o[t].initialX,o[t].obstacleActualX=D;return}if(Bt(o[t]),o[t].obstacleActualX>-90){Ot(o[t]),o[t].obstacleActualX-=m;return}o[t].isDrawingBird=!1,o[t].isDrawingObstacle=!1},xt=()=>{for(let t=0;t<o.length;t++)bt(t)},Lt=t=>{let e=d>200?a.obstacles[Math.floor(Math.random()*a.obstacles.length)]:"cactus";return e=H==="bird"?"cactus":e,H=e,e==="cactus"?vt(t):Dt(t)},vt=t=>{let e=a.cactusTypes[Math.floor(Math.random()*a.cactusTypes.length)],s=g[e],l=e;o[t].type=l,J(t,s,l),o[t].drawY=e==="cactus"||e==="cactusDoubleB"?161-s.h:155-s.h},J=(t,e,s)=>{o[t].w=e.w,o[t].h=e.h,o[t].x=e.x,o[t].y=e.y;let l=s==="birdDown"||s==="birdUp"?.5:.8;o[t].obstacleHeight=e.h*l,o[t].obstacleWidth=e.w*l},Dt=t=>{o[t].isDrawingBird=!0;let e=Math.floor(Math.random()*2);o[t].baseY=e===0?70:90,z(t)},z=t=>{x=x==="birdDown"?"birdUp":"birdDown";let e=g[x],s=x;o[t].type=s,J(t,e,s),o[t].drawY=x==="birdUp"?o[t].baseY:o[t].baseY+10},It=()=>{setInterval(()=>{for(let t=0;t<o.length;t++)o[t].isDrawingBird===!0&&z(t)},150)},Ot=({x:t,y:e,w:s,h:l,obstacleActualX:i,drawY:c,obstacleHeight:h,obstacleWidth:Q})=>{n.drawImage(f,t,e,s,l,i,c,Q,h)};let M=a.canvasInitialWidth;const K=()=>{setTimeout(()=>{if(M+=4,St(M),M<a.canvasMaxWidth)return K()},1)},St=t=>{r.style.width=`${t}px`,r.width=Math.floor(t*y),n.scale(y,y)},At=()=>{L.style.filter="drop-shadow(0 0 7px rgba(0, 0, 0, 0.2))",L.style.boxShadow="0 0 30px rgba(0, 0, 0, 0.1)",L.style.borderRadius="20px"};let Mt=g.dino.w/2,Pt=g.dino.h/2;const Bt=({obstacleActualX:t,drawY:e,obstacleHeight:s,obstacleWidth:l,type:i})=>{let c=v?g.dinoDuckLeftLeg.h/2:Pt;e=i==="cactus"||i==="cactusDoubleB"?e+6:e,a.dinoX+Mt-13>t&&a.dinoX+10<t+l&&u-5>e+e*.2&&u-c<e+s&&Ct()};let b=!1,G=!1;const Ct=()=>{B.play(),b=!0,n.font="50px Pixelify Sans",n.fillStyle="#505050",n.fillText("GAME OVER",170,80),Tt(g.replayIcon),ft()},E=()=>{b=!1},Tt=({h:t,w:e,x:s,y:l})=>{n.drawImage(f,s,l,e,t,a.canvasMaxWidth/2-t/4,90,e/2,t/2),G||(rt(a.canvasMaxWidth/2-t/4,90,e/2,t/2),G=!0)};(async()=>(async()=>{await tt(),await et(),ct(),F(g.ground),U(g.dino)})())();
